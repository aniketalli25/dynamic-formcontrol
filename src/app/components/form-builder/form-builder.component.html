<div class="container">
  <h2 class="form-title">âœ¨ Dynamic Form Builder âœ¨</h2>

  <!-- Buttons to add new fields -->
  <div class="buttons">
    <button (click)="addField('text')" class="btn-custom">â• Add Text</button>
    <button (click)="addField('textarea')" class="btn-custom">ğŸ“ Add Textarea</button>
    <button (click)="addField('dropdown')" class="btn-custom">ğŸ“‹ Add Dropdown</button>
    <button (click)="addField('checkbox')" class="btn-custom">âœ… Add Checkbox</button>
    <button (click)="addField('radio')" class="btn-custom">ğŸ”˜ Add Radio</button>
  </div>

  <!-- Main form -->
  <form [formGroup]="form" (ngSubmit)="submitForm()" class="dynamic-form">
    <div class="form-grid" formArrayName="fields">
      <div *ngFor="let field of fields.controls; let i = index" [formGroupName]="i" class="form-item">
        <!-- Label Input -->
        <label class="form-label">Label</label>
        <input type="text" formControlName="label" placeholder="Enter label" class="form-input" />

        <!-- Placeholder for Text and Textarea -->
        <input *ngIf="field.value.type === 'text'" type="text" formControlName="placeholder" placeholder="Enter text" class="form-input" />
        <textarea *ngIf="field.value.type === 'textarea'" formControlName="placeholder" placeholder="Enter text" class="form-input"></textarea>

        <!-- Dropdown -->
        <div *ngIf="field.value.type === 'dropdown'">
          <select formControlName="selectedValue" class="form-input">
            <option value="">Select</option>
            <option *ngFor="let option of field.get('options')?.value" [value]="option.value">
              {{ option.value }}
            </option>
          </select>
          <button type="button" (click)="addOption(i)">â• Add Option</button>

          <!-- Validation message -->
          <div class="error-message" *ngIf="field.get('selectedValue')?.invalid && field.get('selectedValue')?.touched">
            Please select a dropdown option.
          </div>
        </div>

        <!-- Checkbox -->
        <div *ngIf="field.value.type === 'checkbox'">
          <label>
            <input type="checkbox" [checked]="field.get('required')?.value" (change)="toggleRequired(i, $event)" />
            Required
          </label>
        </div>

        <!-- Radio Buttons -->
      <!-- Radio Buttons -->
<div *ngIf="field.value.type === 'radio'">
  <div *ngIf="field.get('options')?.value.length > 0">
    <div *ngFor="let option of field.get('options')?.value; let j = index">
      <input
        type="radio"
        [value]="option.value"
        formControlName="selectedValue"
        name="radioGroup{{ i }}"
      /> {{ option.value }}
      <button type="button" (click)="removeOption(i, j)">âŒ</button>
    </div>
  </div>
  <button type="button" (click)="addOption(i)">â• Add Option</button>

  <div class="error-message" *ngIf="field.get('selectedValue')?.invalid && field.get('selectedValue')?.touched">
    Please select an option.
  </div>
</div>


        <!-- Label Validation -->
        <div class="error-message" *ngIf="field.get('label')?.invalid && field.get('label')?.touched">
          Label is required!
        </div>

        <!-- Remove field -->
        <button type="button" (click)="removeField(i)" class="btn-remove">âŒ Remove</button>
      </div>
    </div>

    <!-- Submit Button -->
    <button type="submit" class="btn-submit" [disabled]="form.invalid || fields.length === 0">ğŸš€ Submit</button>
  </form>
</div>
